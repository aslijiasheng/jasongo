(function(){(function(e){e.easyPieChart=function(t,n){var r,i,s,o,u,a,f,l=this;this.el=t;this.$el=e(t);this.$el.data("easyPieChart",this);this.init=function(){var t;l.options=e.extend({},e.easyPieChart.defaultOptions,n);t=parseInt(l.$el.data("percent"),10);l.percentage=0;l.canvas=e("<canvas width='"+l.options.size+"' height='"+l.options.size+"'></canvas>").get(0);l.$el.append(l.canvas);if(typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager!==null){G_vmlCanvasManager.initElement(l.canvas)}l.ctx=l.canvas.getContext("2d");l.ctx.translate(l.options.size/2,l.options.size/2);l.$el.addClass("easyPieChart");l.$el.css({width:l.options.size,height:l.options.size,lineHeight:""+l.options.size+"px"});l.update(t);return l};this.update=function(e){if(l.options.animate===false){return s(e)}else{return i(l.percentage,e)}};a=function(){var e,t,n;l.ctx.fillStyle=l.options.scaleColor;l.ctx.lineWidth=1;n=[];for(e=t=0;t<=24;e=++t){n.push(r(e))}return n};r=function(e){var t;t=e%6===0?0:l.options.size*.017;l.ctx.save();l.ctx.rotate(e*Math.PI/12);l.ctx.fillRect(l.options.size/2-t,0,-l.options.size*.05+t,1);return l.ctx.restore()};f=function(){var e;e=l.options.size/2-l.options.lineWidth/2;if(l.options.scaleColor!==false){e-=l.options.size*.08}l.ctx.beginPath();l.ctx.arc(0,0,e,0,Math.PI*2,true);l.ctx.closePath();l.ctx.strokeStyle=l.options.trackColor;l.ctx.lineWidth=l.options.lineWidth;return l.ctx.stroke()};u=function(){if(l.options.scaleColor!==false){a()}if(l.options.trackColor!==false){return f()}};s=function(t){var n;u();l.ctx.strokeStyle=e.isFunction(l.options.barColor)?l.options.barColor(t):l.options.barColor;l.ctx.lineCap=l.options.lineCap;n=l.options.size/2-l.options.lineWidth/2;if(l.options.scaleColor!==false){n-=l.options.size*.08}l.ctx.save();l.ctx.rotate(-Math.PI/2);l.ctx.beginPath();l.ctx.arc(0,0,n,0,Math.PI*2*t/100,false);l.ctx.stroke();return l.ctx.restore()};i=function(e,t){var n,r,i;r=30;i=r*l.options.animate/1e3;n=0;l.options.onStart.call(l);l.percentage=t;if(l.animation){clearInterval(l.animation);l.animation=false}return l.animation=setInterval(function(){l.ctx.clearRect(-l.options.size/2,-l.options.size/2,l.options.size,l.options.size);u.call(l);s.call(l,[o(n,e,t-e,i)]);n++;if(n/i>1){clearInterval(l.animation);l.animation=false;return l.options.onStop.call(l)}},1e3/r)};o=function(e,t,n,r){e/=r/2;if(e<1){return n/2*e*e+t}else{return-n/2*(--e*(e-2)-1)+t}};return this.init()};e.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",size:110,lineWidth:3,animate:false,onStart:e.noop,onStop:e.noop};e.fn.easyPieChart=function(t){return e.each(this,function(n,r){var i;i=e(r);if(!i.data("easyPieChart")){return i.data("easyPieChart",new e.easyPieChart(r,t))}})};return void 0})(jQuery)}).call(this)